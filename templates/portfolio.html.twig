{% embed 'partials/base.html.twig' %}

	{% set collection = page.collection() %}

	{% block content %}

		{% if theme_config.sidebar.enabled is not sameas(false) and page.header.sidebar.enabled is not sameas(false) %}
			{% set sidebar = true %}
		{% else %}
			{% set sidebar = false %}
		{% endif %}

		{% set portfolio_image = page.media.images|first %}
		{% if portfolio_image %}
			{% include 'partials/showcase.html.twig' with {'content':page.content, 'image': portfolio_image } %}
		{% endif %}

		<div class="container">
			{% if config.plugins.breadcrumbs.enabled %}
				{% include 'partials/breadcrumbs.html.twig' %}
			{% endif %}
			<div class="row">
				<div class="col">
					<div class="row items">
						{% for portfolio in collection %}
							{% include 'partials/layouts/' ~ page.header.layout|defined('boxed') ~ '.html.twig' with {'parent': page, 'page': portfolio } %}
						{% endfor %}
					</div>
					{% if config.plugins.pagination.enabled and collection.params.pagination %}
							{% include 'partials/pagination.html.twig' with {'base_url':page.url, 'pagination':collection.params.pagination} %}
					{% endif %}
				</div>
				{% if sidebar %}
					<div id="sidebar" class="col-12 col-md-4 {% if theme_config.sidebar.align == 'left' %}order-first{% endif %}">
						<div class="sidebar-content {% if theme_config.sidebar.border %}border-{{ theme_config.sidebar.border }}{% endif %}">
						{% include 'partials/sidebar.html.twig' with {'blog': page} %}
						</div>
					</div>
				{% endif %}
			</div>
		</div>
	{% endblock %}

{% endembed %}
